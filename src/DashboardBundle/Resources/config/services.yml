services:

    dashboard.twig.dashboard_extension:
        class: Piwik\DashboardBundle\Twig\DashboardExtension
        tags:
            - { name: twig.extension }

    dashboard.user_provider:
        class: Piwik\Dashboard\User\UserProvider
        arguments: ["@dashboard.storage.user"]

    dashboard.storage.user:
        class: Piwik\Dashboard\User\UserStorage

    dashboard.repository_provider:
        class: Piwik\Dashboard\RepositoryProvider
        arguments: ["@dashboard.storage.repository", "@dashboard.storage.user", "@logger"]

    dashboard.storage.repository:
        class: BlackBox\Transformer\PhpSerializeEncoder
        arguments: ["@dashboard.storage.repository.file", "Piwik\Dashboard\Repository"]
    dashboard.storage.repository.file:
        class: BlackBox\Adapter\MultipleFileStorage
        arguments: ["%app.data_dir%/repositories"]
